# Shape Section

Вы помогаете пользователю определить спецификацию для секции его продукта. Это разговорный процесс для установления области функциональности, пользовательских потоков и требований к UI.

## Step 1: Check Prerequisites

Сначала проверьте, что существует `/product/product-roadmap.md`. Если его нет:

"Я не вижу определённой дорожной карты продукта пока. Пожалуйста, сначала запустите `/product-roadmap` для определения секций вашего продукта, затем вернитесь для формирования отдельных секций."

Остановитесь здесь, если дорожная карта не существует.

## Step 2: Identify the Target Section

Прочитайте `/product/product-roadmap.md`, чтобы получить список доступных секций.

Если есть только одна секция, автоматически выберите её. Если секций несколько, используйте инструмент AskUserQuestion, чтобы спросить, над какой секцией пользователь хочет работать:

"Для какой секции вы хотели бы определить спецификацию?"

Представьте доступные секции как варианты.

## Step 3: Gather Initial Input

Как только секция определена, пригласите пользователя поделиться любыми первоначальными мыслями:

"Давайте определим область и требования для **[Section Title]**.

Есть ли у вас какие-либо заметки или идеи о том, что должна включать эта секция? Поделитесь любыми мыслями о функциях, пользовательских потоках или паттернах UI, которые вы представляете. Если вы пока не уверены, мы можем начать с вопросов."

Дождитесь их ответа. Пользователь может предоставить сырые заметки или попросить продолжить с вопросами.

## Step 4: Ask Clarifying Questions

Используйте инструмент AskUserQuestion, чтобы задать 4-6 целевых вопросов для определения:

- **Основных действий/задач пользователя** - Что пользователи могут делать в этой секции?
- **Информации для отображения** - Какие данные и контент нужно показать?
- **Ключевых пользовательских потоков** - Каковы пошаговые взаимодействия?
- **Паттернов UI** - Нужны ли какие-либо конкретные взаимодействия, макеты или компоненты?
- **Границ области** - Что должно быть явно исключено?

Примеры вопросов (адаптируйте на основе их ввода и секции):
- "Каковы основные действия, которые пользователь может выполнить в этой секции?"
- "Какая информация должна отображаться на основном представлении?"
- "Проведите меня через основной пользовательский поток - что происходит шаг за шагом?"
- "Есть ли какие-либо конкретные паттерны UI, которые вы хотите использовать (например, таблицы, карточки, модальные окна)?"
- "Что намеренно выходит за рамки этой секции?"
- "Нужны ли несколько представлений (например, представление списка и представление деталей)?"

Задавайте вопросы по одному или два за раз, разговорно. Фокусируйтесь на пользовательском опыте и требованиях к интерфейсу - никаких деталей бэкенда или базы данных.

## Step 5: Ask About Shell Configuration

Если для этого проекта был создан дизайн shell (проверьте, существует ли `/src/shell/components/AppShell.tsx`), спросите пользователя об использовании shell:

"Должны ли дизайны экранов этой секции отображаться **внутри оболочки приложения** (с заголовком навигации) или они должны быть **автономными страницами** (без shell)?

Большинство секций используют оболочку приложения, но некоторые страницы, такие как публичные представления, целевые страницы или встроенные виджеты, должны быть автономными."

Используйте AskUserQuestion с вариантами:
- "Внутри оболочки приложения" - По умолчанию для большинства внутриприложенных секций
- "Автономно (без shell)" - Для публичных страниц, целевых страниц или встраиваний

Если дизайн shell еще не существует, пропустите этот вопрос и по умолчанию используйте shell.

## Step 6: Present Draft and Refine

Как только у вас будет достаточно информации, представьте черновик спецификации:

"Основываясь на нашем обсуждении, вот спецификация для **[Section Title]**:

**Обзор:**
[Резюме в 2-3 предложения о том, что делает эта секция]

**Пользовательские потоки:**
- [Flow 1]
- [Flow 2]
- [Flow 3]

**Требования к UI:**
- [Requirement 1]
- [Requirement 2]
- [Requirement 3]

**Отображение:** [Внутри оболочки приложения / Автономно]

Охватывает ли это всё? Хотели бы вы что-нибудь скорректировать?"

Итерируйте, пока пользователь не будет удовлетворен. Не добавляйте функции, которые не обсуждались. Не пропускайте функции, которые обсуждались.

## Step 7: Create the Spec File

После одобрения пользователем создайте файл по адресу `product/sections/[section-id]/spec.md` в следующем точном формате:

```markdown
# [Section Title] Specification

## Overview
[Финализированное описание в 2-3 предложения]

## User Flows
- [Flow 1]
- [Flow 2]
- [Flow 3]
[Добавьте все обсужденные потоки]

## UI Requirements
- [Requirement 1]
- [Requirement 2]
- [Requirement 3]
[Добавьте все обсужденные требования]

## Configuration
- shell: [true/false]
```

**Важно:**
- Установите `shell: true`, если секция должна отображаться внутри оболочки приложения (это по умолчанию)
- Установите `shell: false`, если секция должна отображаться как автономная страница без shell

section-id - это slug-версия названия секции (нижний регистр, дефисы вместо пробелов).

## Step 8: Confirm and Next Steps

Сообщите пользователю:

"Я создал спецификацию в `product/sections/[section-id]/spec.md`.

Вы можете просмотреть спецификацию на странице секции. Когда будете готовы, запустите `/sample-data` для создания примерных данных для этой секции."

## Important Notes

- Будьте разговорными и полезными, не роботизированными
- Задавайте дополнительные вопросы, когда ответы расплывчаты
- Фокусируйтесь на UX и UI - не обсуждайте детали бэкенда, базы данных или API
- Держите спецификацию краткой - включайте только то, что обсуждалось, без лишнего
- Формат должен точно соответствовать для правильного парсинга приложением
